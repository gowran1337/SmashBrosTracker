@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="text-center header">
    <h1>Smash Bros Tracker</h1>
    <p>Track your wins and kebabs in Super Smash Bros Melee!</p>
</div>

<div class="container">
    <!-- Combined Player Form Section -->
    <div class="player-forms">
        <form method="post" asp-page-handler="StartSession" id="sessionForm" class="combined-form">
            <div class="player-form-section">
                <h3>Player 1</h3>
                <label for="Player1NameInput">Player Name</label>
                <select id="Player1NameInput" name="Player1Id" asp-for="Player1Id" required>
                    <option value="" selected disabled>Choose player</option>
                    @foreach (var Player in Model.Players)
                    {
                        <option value="@Player.Id">@Player.Name</option>
                    }
                </select>

                <label for="P1Select">Character</label>
                <select id="P1Select" name="Player1CharacterId" asp-for="Player1CharacterId" required>
                    <option value="" selected disabled>Choose character</option>
                    @foreach (var Character in Model.Characters)
                    {
                        <option value="@Character.Id">@Character.Name</option>
                    }
                </select>
            </div>

            <div class="player-form-section">
                <h3>Player 2</h3>
                <label for="Player2NameInput">Player Name</label>
                <select id="Player2NameInput" name="Player2Id" asp-for="Player2Id" required>
                    <option value="" selected disabled>Choose player</option>
                    @foreach (var Player in Model.Players)
                    {
                        <option value="@Player.Id">@Player.Name</option>
                    }
                </select>

                <label for="P2Select">Character</label>
                <select id="P2Select" name="Player2CharacterId" asp-for="Player2CharacterId" required>
                    <option value="" selected disabled>Choose character</option>
                    @foreach (var Character in Model.Characters)
                    {
                        <option value="@Character.Id">@Character.Name</option>
                    }
                </select>
            </div>

            <div class="start-session-container">
                <button type="submit" class="start-session-button">Start Session</button>
            </div>
        </form>
    </div>

    <!-- Rest of your code (leaderboard, add player section) remains the same -->
</div>

    <!-- Leaderboard Section -->
    <div class="leaderboard-container">
        <div class="leaderboard">
            <h2>Leaderboards</h2>
            <table>
                <tr>
                    <th>Player</th>
                    <th>Stars</th>
                    <th>Kebabs Won</th> 
                    <th> </th>
                </tr>
                @foreach (var Player in Model.Players)
                {
                    <tr>
                        <td>@Player.Name</td>
                        <td>@Player.TotalStars</td>
                        <td>@Player.KebabsWon</td>
                        <td>
                            <form method="post" asp-page-handler="DeletePlayer" asp-route-id="@Player.Id">
                                <input type="submit" value="Delete" class="delete-button">
                            </form>
                        </td>
                    </tr>
                }
            </table>
        </div>

        <!-- Add Player Section -->
        <div class="add-player">
            <form method="post" asp-page-handler="AddPlayerMethod" id="add-player-form">
                <h3>Add Player</h3>
                <label for="CreatePlayer">Player Name</label>
                <input type="text" id="CreatePlayer" name="SelectedPlayerName" asp-for="SelectedPlayerName" required>
                <span id="name-error" class="text-danger" style="display: none;">A player with this name already exists.</span>
                <button type="submit">Add Player</button>
            </form>
        </div>
    </div>

<h2>Sessions</h2>

<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Player</th>
            <th>Character</th>
            <th>Stars Earned</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var session in Model.Sessions)
        {
            foreach (var player in session.SessionPlayers)
            {
                <tr>
                    <td>@session.Date.ToString("yyyy-MM-dd HH:mm")</td>
                    <td>@player.Player.Name</td>
                    <td>@player.Character.Name</td>
                    <td>@player.StarsEarned</td>
                </tr>
            }
        }
    </tbody>
</table>

<script src="~/js/site.js"></script>

